services:
  metadata-monitor:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: metadata-monitor
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
      - ./config.yaml:/app/config.yaml
      - ./secrets:/app/secrets:ro
    environment:
      - GOOGLE_SHEETS_TYPE=${GOOGLE_SHEETS_TYPE:-}
      - GOOGLE_SHEETS_PROJECT_ID=${GOOGLE_SHEETS_PROJECT_ID:-}
      - GOOGLE_SHEETS_PRIVATE_KEY_ID=${GOOGLE_SHEETS_PRIVATE_KEY_ID:-}
      - GOOGLE_SHEETS_PRIVATE_KEY=${GOOGLE_SHEETS_PRIVATE_KEY:-}
      - GOOGLE_SHEETS_CLIENT_EMAIL=${GOOGLE_SHEETS_CLIENT_EMAIL:-}
      - GOOGLE_SHEETS_CLIENT_ID=${GOOGLE_SHEETS_CLIENT_ID:-}
      - GOOGLE_SHEETS_AUTH_URI=${GOOGLE_SHEETS_AUTH_URI:-}
      - GOOGLE_SHEETS_TOKEN_URI=${GOOGLE_SHEETS_TOKEN_URI:-}
      - GOOGLE_SHEETS_AUTH_PROVIDER_X509_CERT_URL=${GOOGLE_SHEETS_AUTH_PROVIDER_X509_CERT_URL:-}
      - GOOGLE_SHEETS_CLIENT_X509_CERT_URL=${GOOGLE_SHEETS_CLIENT_X509_CERT_URL:-}
    restart: unless-stopped
    networks:
      - appnet

networks:
  appnet: